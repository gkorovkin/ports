# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem			1.0

name				h323plus
distname			h323plus
version				1.26.10
categories			devel
platforms			darwin
license				BSD
maintainers			gkorovin
description			H323Plus signalling stack development library
long_description	H323 Plus library

#fetch from cvs
fetch.type			git
git.url				https://github.com/willamowius/h323plus
git.branch			64f090966acbd9c93b6a2cd78e5c49175e8e2920


#cvs.module			h323plus
patch.pre_args		-p1
patchfiles			01_configure.ac.patch 01_libname.patch 03_Makefile.in.patch
	# \
	#03_src_makefile.patch

depends_lib			port:ptlib

#pre-configure {
#	 autoconf -f -I ${prefix}/aclocal
#	 cd plugins && autoconf -f -I ${prefix}/aclocal
#}

pre-configure {
	reinplace "s|include \$\(PTLIBDIR\)\/make|include \$\(PTLIBDIR\)\/share\/ptlib\/make|g" \
		${workpath}/${worksrcdir}/openh323u.mak.in \
		${workpath}/${worksrcdir}/src/Makefile
}

#add pc file
post-extract {
	copy ${portpath}/${filesdir}/h323plus.pc.in ${workpath}/${worksrcdir}/
}

use_autoconf		yes
autoconf.args		-I ${prefix}/share/aclocal
use_configure		yes
build.target		optshared
configure.args		--disable-plugins \
					--disable-h46018 \
					--disable-h46023 \
					--disable-h460p \
					--disable-gnugk \
					--enable-h235 \
					--enable-h235-256
